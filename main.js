// Generated by CoffeeScript 1.6.3
(function() {
  var app, config, debug, express, info, lib, warn, _ref;

  config = require('./lib/config');

  lib = require('./lib');

  _ref = require('./lib/logger'), debug = _ref.debug, info = _ref.info, warn = _ref.warn;

  express = require('express');

  app = express();

  app.configure(function() {
    app.set("views", __dirname);
    app.set("view engine", 'jade');
    app.enable("trust proxy");
    app.use(express.favicon());
    app.use(express.compress());
    app.use(express.cookieParser());
    app.use(express.json());
    app.use(app.router);
    if (config.env === "development") {
      app.use('/inc', express["static"](__dirname + "/inc"));
      app.use(express.errorHandler({
        dumpExceptions: true,
        showStack: true
      }));
      app.locals.pretty = true;
      return app.locals.cache = false;
    } else {
      app.use('/inc', express["static"](__dirname + "/inc", {
        maxAge: 1 * 24 * 3600 * 1000
      }));
      app.use(express.errorHandler());
      app.locals.pretty = false;
      return app.locals.cache = true;
    }
  });

  app.get('/', function(req, res) {
    return res.render("app/main", {
      title: "Main Page Title"
    });
  });

  info("Listen - " + config.server.host + ":" + config.server.port);

  app.listen(config.server.port, config.server.host);

  lib.watch_file(__filename);

}).call(this);
